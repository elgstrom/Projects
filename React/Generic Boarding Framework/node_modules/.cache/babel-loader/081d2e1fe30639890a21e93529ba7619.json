{"ast":null,"code":"import _slicedToArray from \"/Users/elgstrom/Desktop/Netgain/netgain-1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/elgstrom/Desktop/Netgain/netgain-1/src/views/Create_Process_Form.tsx\";\nimport * as React from \"react\";\nimport { Form, FieldArray, Formik } from \"formik\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { Process, Activity } from \"../backend/ts/common_define\";\nimport { save_process_template, does_process_exist } from \"../backend/ts/database\";\nimport { useHistory } from \"react-router\";\nimport { useState } from \"react\";\nimport Activity_Component from \"../components/Activity_Component\";\nimport Drawer_Component from \"../components/Drawer_Component\";\nconst useStyles = makeStyles(theme => createStyles({\n  root: {\n    display: \"flex\"\n  },\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  textField: {\n    margin: theme.spacing(1),\n    width: \"100%\"\n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: theme.spacing(1)\n  },\n  card: {\n    \"&:hover\": {\n      boxShadow: \"0 5px 15px rgba(0,0,0,0.3)\"\n    }\n  }\n}));\n\nfunction InnerForm() {\n  const history = useHistory();\n  const classes = useStyles({});\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        submitDialogOpen = _useState2[0],\n        setSubmitDialogOpen = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        forceUpdate = _useState4[0],\n        setForceUpdate = _useState4[1];\n\n  const handleClose = (answer, values) => {\n    setSubmitDialogOpen(false);\n\n    if (answer === true) {\n      submitProcess(values);\n    }\n  };\n\n  const submitProcess = values => {\n    save_process_template(values);\n    console.log(values);\n    history.push(\"/View_Process_Templates\");\n  };\n\n  const addActivityTemplate = activity => {\n    if (fp !== undefined) {\n      console.log(activity);\n      fp.values.activities.push(activity); //need the page to render so update a state\n\n      setForceUpdate(value => ++value);\n      console.log(fp);\n    }\n  };\n\n  let fp;\n  let initVals = new Process();\n  initVals.activities.push(new Activity());\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(Drawer_Component, {\n    handleClick: addActivityTemplate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(Formik, {\n    initialValues: initVals,\n    onSubmit: (values, actions) => {\n      console.log(values);\n      does_process_exist(values.title).then(does_exist => {\n        if (does_exist) setSubmitDialogOpen(true);else submitProcess(values);\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, formikProps => {\n    fp = formikProps;\n    return React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      className: classes.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      justify: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      name: \"title\",\n      className: classes.textField,\n      label: \"Process Title\",\n      margin: \"normal\",\n      variant: \"outlined\",\n      autoComplete: \"off\",\n      type: \"text\",\n      required: true,\n      onChange: formikProps.handleChange,\n      onBlur: formikProps.handleBlur,\n      value: formikProps.values.title.length === 1 ? formikProps.values.title.toUpperCase() : formikProps.values.title,\n      inputProps: {\n        style: {\n          fontSize: 30\n        }\n      },\n      InputLabelProps: {\n        style: {\n          fontSize: 30\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      name: \"description\",\n      id: \"outlined-basic\",\n      className: classes.textField,\n      label: \"Description\",\n      margin: \"normal\",\n      multiline: true,\n      rows: \"3\",\n      variant: \"outlined\",\n      type: \"text\",\n      onChange: formikProps.handleChange,\n      onBlur: formikProps.handleBlur,\n      value: formikProps.values.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }))), React.createElement(FieldArray, {\n      name: \"activities\",\n      render: helpers => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, formikProps.values.activities && formikProps.values.activities.length > 0 ? formikProps.values.activities.map((activity, index) => React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Activity_Component, {\n        prefix: \"activities.\".concat(index, \".\"),\n        activity: activity,\n        index: index,\n        classes: classes,\n        amountOfActivities: formikProps.values.activities.length,\n        arrayHelpers: helpers,\n        formikProps: formikProps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }))) : null, React.createElement(Grid, {\n        justify: \"center\",\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(AlreadyExistDialog, {\n        handleClose: handleClose,\n        values: formikProps.values,\n        submitDialogOpen: submitDialogOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        className: classes.button,\n        type: \"submit\",\n        color: \"primary\",\n        disabled: formikProps.isSubmitting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Save\"))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }));\n  }));\n}\n\nfunction AlreadyExistDialog({\n  submitDialogOpen,\n  handleClose,\n  values\n}) {\n  return React.createElement(Dialog, {\n    open: submitDialogOpen,\n    onClose: () => {\n      handleClose(false, values);\n    },\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"A process with this name already exists, do you want to overwrite it?\"), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => {\n      handleClose(false, values);\n    },\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, \"No\"), React.createElement(Button, {\n    onClick: () => {\n      handleClose(true, values);\n    },\n    color: \"primary\",\n    autoFocus: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, \"Yes\")));\n}\n\nexport default InnerForm;","map":{"version":3,"sources":["/Users/elgstrom/Desktop/Netgain/netgain-1/src/views/Create_Process_Form.tsx"],"names":["React","Form","FieldArray","Formik","createStyles","makeStyles","TextField","Button","Paper","Grid","Dialog","DialogActions","DialogTitle","Process","Activity","save_process_template","does_process_exist","useHistory","useState","Activity_Component","Drawer_Component","useStyles","theme","root","display","container","flexWrap","button","margin","spacing","textField","width","paper","padding","card","boxShadow","InnerForm","history","classes","submitDialogOpen","setSubmitDialogOpen","forceUpdate","setForceUpdate","handleClose","answer","values","submitProcess","console","log","push","addActivityTemplate","activity","fp","undefined","activities","value","initVals","actions","title","then","does_exist","formikProps","handleChange","handleBlur","length","toUpperCase","style","fontSize","description","helpers","map","index","isSubmitting","AlreadyExistDialog"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { withFormik, FormikProps, Form, FieldArray, Formik } from \"formik\";\n\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { Process, Activity } from \"../backend/ts/common_define\";\nimport {\n  save_process_template,\n  does_process_exist,\n  get_activity_templates\n} from \"../backend/ts/database\";\nimport { useHistory } from \"react-router\";\nimport {\n  Drawer,\n  List,\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Divider\n} from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport Activity_Component from \"../components/Activity_Component\";\nimport Drawer_Component from \"../components/Drawer_Component\";\n\ninterface OtherProps {\n  title?: string;\n}\n\ninterface CreateProcessProps {\n  title?: string;\n  description?: string;\n  activities?: Array<Activity>;\n}\n\ninterface AlreadyExistDialog {\n  submitDialogOpen: boolean;\n  values: Process;\n  handleClose(answer: Boolean, values: Process): void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: \"flex\"\n    },\n    container: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    button: {\n      margin: theme.spacing(1)\n    },\n    textField: {\n      margin: theme.spacing(1),\n      width: \"100%\"\n    },\n    paper: {\n      padding: theme.spacing(2),\n      margin: theme.spacing(1)\n    },\n    card: {\n      \"&:hover\": {\n        boxShadow: \"0 5px 15px rgba(0,0,0,0.3)\"\n      }\n    }\n  })\n);\n\n\n\nfunction InnerForm() {\n  const history = useHistory();\n  const classes = useStyles({});\n  const [submitDialogOpen, setSubmitDialogOpen] = useState(false);\n  const [forceUpdate, setForceUpdate] = useState(0);\n  const handleClose = (answer: Boolean, values: Process) => {\n    setSubmitDialogOpen(false);\n    if (answer === true) {\n      submitProcess(values);\n    }\n  };\n\n  const submitProcess = (values: Process) => {\n    save_process_template(values);\n    console.log(values);\n    history.push(\"/View_Process_Templates\");\n  };\n\n  const addActivityTemplate = (activity: Activity) => {\n    if (fp !== undefined) {\n      console.log(activity)\n      fp.values.activities.push(activity);\n      //need the page to render so update a state\n      setForceUpdate(value => ++value);\n      console.log(fp)\n    }\n  };\n  let fp: FormikProps<any>;\n  let initVals = new Process();\n  initVals.activities.push(new Activity());\n  return (\n    <div className={classes.root}>\n      <Drawer_Component handleClick={addActivityTemplate} />\n      <Formik\n        initialValues={initVals}\n        onSubmit={(values, actions) => {\n          console.log(values);\n          does_process_exist(values.title).then(does_exist => {\n            if (does_exist) setSubmitDialogOpen(true);\n            else submitProcess(values);\n          });\n        }}\n      >\n        {(formikProps: FormikProps<any>) => {\n          fp = formikProps;\n          return (\n            <Form>\n              <Paper className={classes.paper}>\n                <Grid container justify=\"center\">\n                  <TextField\n                    name=\"title\"\n                    className={classes.textField}\n                    label=\"Process Title\"\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    autoComplete=\"off\"\n                    type=\"text\"\n                    required\n                    onChange={formikProps.handleChange}\n                    onBlur={formikProps.handleBlur}\n                    value={\n                      formikProps.values.title.length === 1\n                        ? formikProps.values.title.toUpperCase()\n                        : formikProps.values.title\n                    }\n                    inputProps={{\n                      style: { fontSize: 30 }\n                    }}\n                    InputLabelProps={{\n                      style: { fontSize: 30 }\n                    }}\n                  />\n                  <TextField\n                    name=\"description\"\n                    id=\"outlined-basic\"\n                    className={classes.textField}\n                    label=\"Description\"\n                    margin=\"normal\"\n                    multiline\n                    rows=\"3\"\n                    variant=\"outlined\"\n                    type=\"text\"\n                    onChange={formikProps.handleChange}\n                    onBlur={formikProps.handleBlur}\n                    value={formikProps.values.description}\n                  />\n                </Grid>\n              </Paper>\n              <FieldArray\n                name=\"activities\"\n                render={helpers => (\n                  <div>\n                    {formikProps.values.activities &&\n                    formikProps.values.activities.length > 0\n                      ? formikProps.values.activities.map(\n                          (activity: Activity, index: number) => (\n                            <div key={index}>\n                              <Activity_Component\n                                prefix={`activities.${index}.`}\n                                activity={activity}\n                                index={index}\n                                classes={classes}\n                                amountOfActivities={\n                                  formikProps.values.activities.length\n                                }\n                                arrayHelpers={helpers}\n                                formikProps={formikProps}\n                              />\n                            </div>\n                          )\n                        )\n                      : null}\n                    <Grid justify=\"center\" container>\n                      <AlreadyExistDialog\n                        handleClose={handleClose}\n                        values={formikProps.values}\n                        submitDialogOpen={submitDialogOpen}\n                      />\n                      <Button\n                        variant=\"contained\"\n                        className={classes.button}\n                        type=\"submit\"\n                        color=\"primary\"\n                        disabled={formikProps.isSubmitting}\n                      >\n                        Save\n                      </Button>\n                    </Grid>\n                  </div>\n                )}\n              />\n            </Form>\n          );\n        }}\n      </Formik>\n    </div>\n  );\n}\n\nfunction AlreadyExistDialog({\n  submitDialogOpen,\n  handleClose,\n  values\n}: AlreadyExistDialog) {\n  return (\n    <Dialog\n      open={submitDialogOpen}\n      onClose={() => {\n        handleClose(false, values);\n      }}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">\n        {\n          \"A process with this name already exists, do you want to overwrite it?\"\n        }\n      </DialogTitle>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            handleClose(false, values);\n          }}\n          color=\"primary\"\n        >\n          No\n        </Button>\n        <Button\n          onClick={() => {\n            handleClose(true, values);\n          }}\n          color=\"primary\"\n          autoFocus\n        >\n          Yes\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nexport default InnerForm;\n"]},"metadata":{},"sourceType":"module"}